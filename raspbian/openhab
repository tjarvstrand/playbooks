---
- name: "Openhab"
  hosts: all
  become: yes
  tasks:

    - name: Install apt https
      action: apt
      args:
        state: latest
        name: apt-transport-https

    - name: Add Openhab repo
      action: apt_repository
      args:
        repo: 'deb https://dl.bintray.com/openhab/apt-repo2 stable main'

    - name: Install Openhab
      action: apt
      args:
        name: openhab2
        state: latest

    - name: Add openhab user to dialout
      action: user
      args:
        append: yes
        group: openhab
        groups: dialout
        user: openhab

    - name: Enable Openhab service
      action: service
      args:
        name: openhab2
        enabled: true
        state: restarted

# Local Variables:
# mode: yaml
# End:
