---
- name: Config files
  hosts: all
  tasks:
    - action: git
      name: Clone git repo
      args:
        repo: git@github.com:tjarvstrand/config-files.git
        dest: "~/config-files"
    - action: file
      name: Ensure directories
      args:
        dest: "~/{{item}}"
        state: directory
      with_items:
        - .config
    - action: file
      name: Create symlinks
      args:
        force: yes
        src: "{{item}}"
        dest: "~/{{item | basename}}"
        state: link
      with_fileglob:
        - ~/config-files/.*
      with_items:
        - ~/config-files/.xchat2
        - ~/config-files/.xmonad
    - action: file
      name: Create ssh config symlink
      args:
        force: yes
        src: "~/config-files/ssh-config"
        dest: "~/.ssh/config"
        state: link
    - action: file
      name: Create Terminator config symlink
      args:
        force: yes
        src: "~/config-files/terminator"
        dest: "~/.config/terminator"
        state: link
    - action: file
      name: Create Transmission config dir
      args:
        dest: "~/.config/transmission"
        state: directory
    - action: file
      name: Create Transmission config symlink
      args:
        force: yes
        src: "~/config-files/transmission/settings.json"
        dest: "~/.config/transmission/settings.json"
        state: link
    - action: file
      name: Create Emacs config dir
      args:
        path: "~/.emacs.d"
        state: directory
    - action: file
      name: Create Emacs lib symlink
      args:
        force: yes
        src: "~/config-files/.emacs.d/lib"
        dest: "~/.emacs.d/lib"
        state: link
    - action: file
      name: Delete local gnome-do config
      args:
        state: absent
        path: ~/.gconf/apps/gnome-do
    - action: file
      name: Create gnome-do config symlink
      args:
        force: yes
        src: ~/config-files/.gconf/apps/gnome-do
        dest: ~/.gconf/apps/gnome-do
        state: link

# Local Variables:
# mode: yaml
# End: