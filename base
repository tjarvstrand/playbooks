---
- name: Directories
  hosts: all
  tasks:
    - action: file
      name: Create
      args:
        path: "{{item}}"
        state: directory
      with_items:
        - ~/bin
        - ~/src
        - ~/.config
    - action: file
      name: Delete
      args:
        path: "{{item}}"
        state: absent
      with_items:
        - ~/Music
        - ~/Public
        - ~/Templates
        - ~/Videos
        - ~/examples.desktop
- name: Install packages
  hosts: all
  sudo: yes
  tasks:
    - action: apt_repository
      name: Add apt repositories
      args:
        repo: "{{item}}"
      with_items:
        - ppa:ubuntu-wine/ppa
        - deb http://archive.canonical.com/ubuntu/ trusty partner
    - action: apt_key
      name: Add apt keys
      args:
        keyserver: hkp://keyserver.ubuntu.com:80
        id: 94558F59
    - action: apt
      name: Install packages
      args:
        name: "{{item}}"
        force: yes
      with_items:
        - adobe-flashplugin
        - curl
        - build-essential
        - gimp
        - git
        - gnome-do
        - gnupg
        - mono-complete
        - network-manager-openvpn
        - skype
        - synaptic
        - terminator
        - ttf-mscorefonts-installer
        - tree
        - vlc
        - wine

        # Emacs
        - emacs23
        - emacs23-el
        - emacs24
        - emacs24-el
        - emacs-goodies-el

        # erlang/otp
        - autoconf
        - libncurses5-dev
        - libssl-dev
        # erlang wx support
        - libwxgtk2.8-dev
        - freeglut3-dev

        # BankID
        # - ia32-libs
        # - nspluginwrapper

        # tmux
        - libevent-dev
        - libncurses-dev
        # - autoreconf
- name: Gnome config
  hosts: all
  tasks:
    - shell: gsettings set org.gnome.settings-daemon.peripherals.touchpad disable-while-typing true
      name: Disable touchpad while typing
- name: Xsession
  hosts: all
  tasks:
    - name: Xsession file
      action: copy
      sudo: yes
      args:
        src: files/etc/X11/Xsession.d/56mysession
        dest: /etc/X11/Xsession.d/56mysession
    - shell: . /etc/X11/Xsession.d/56mysession
- name: XOrg config
  hosts: all
  tasks:
    - name: XOrg config
      action: copy
      sudo: yes
      args:
        src: files/usr/share/X11/xorg.conf.d/60-compositing.conf
        dest: /usr/share/X11/xorg.conf.d/100-compositing.conf
- name: X config
  hosts: all
  tasks:
    - name: X defaults
      action: copy
      args:
        dest: ~/.Xdefaults
        content: |
          URxvt.depth: 32
          URxvt*background: rgba:0000/0000/0000/cccc
    - name: X session
      action: copy
      sudo: yes
      args:
        dest: /etc/X11/Xsession.d/60-xcompmgr
        content: xcompmgr -cFf &

# Local Variables:
# mode: yaml
# End:
